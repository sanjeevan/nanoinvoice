{% extends 'layout.html' %}
{% from 'macros/_misc.html' import render_input %}

{% block content %}
  
  <div class="filters">
    <div class="left">
      <a href="{{ url_for('.create') }}"><img src="/static/img/plus.png"> Add client</a>
    </div>
    <div class="right">
    </div>
  </div>
  
  <div class="workspace-inner">

    <form class="create inline client" method="post" action="{{ url_for('.show', id=contact.id) }}">
      <div class="header">Client</div>
      <div class="fields">

        {{ render_input(form.first_name) }} 
        {{ render_input(form.last_name) }} 
        {{ render_input(form.email_address) }} 

        {{ render_input(form.organisation) }}

        {{ render_input(form.address_line1) }}
        {{ render_input(form.address_line2) }}
        {{ render_input(form.town) }}
        {{ render_input(form.city) }}
        {{ render_input(form.county) }}
        {{ render_input(form.country) }}
        {{ render_input(form.post_code) }}
        
        <div class="field">
          <button class="btn btn-primary" type="submit">Update</button>
          <a class="btn btn-danger pull-right" type="button" href="{{ url_for('.delete', id=contact.id) }}">Delete</a>
        </div>

      </div>
    </form>

    {% if invoices|length > 0 %}
    <div class="data-list-wrapper invoice-data-list client-invoices"> 
      <div class="data-list-header">
        <div class="col due">Due date</div>
        <div class="col ref">Reference No.</div>
        <div class="col name">Client</div>
        <div class="col total">Total</div>
        <div class="col status">Status</div>
      </div>
      <div class="data-list">
        {% for invoice in invoices %}
          <div class="row" data-id="{{ invoice.id }}">
            <div class="col due">{{ invoice.due_date.strftime('%d %B %Y') }}</div>
            <div class="col ref">{{ invoice.reference }}</div>
            <div class="col name">{{ invoice.contact.first_name }} {{ invoice.contact.last_name }}</div>
            <div class="col total"><span class='currency-code'>{{ invoice.currency_code }}</span> {{ invoice.total|format_currency }}</div>
            <div class="col status"><span class='label label-{{ invoice.get_status() }}'>{{ invoice.get_status() }}</span></div>
          </div>
        {% endfor %}
      </div>
    </div>
    {% endif %}


  </div>

{% endblock %}
