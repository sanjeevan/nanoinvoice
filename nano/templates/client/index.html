{% extends 'layout.html' %}

{% block content %}
  
  <div class="filters">
    <div class="left">
      <a href="{{ url_for('.create') }}"><img src="/static/img/plus.png"> Add client</a>
    </div>
    <div class="right">
    </div>
  </div>

  <h1>Clients</h1>

  {% if contacts|length == 0 %}
    
  <p class="first-create">You have no contacts setup, <a href="{{ url_for('.create') }}">add one now</a></p>
    
  {% else %}
  
  <div class="workspace-inner">
    <table class="table table-striped table-hover data-list">
      <thead class="data-list-header">
        <tr>
          <th>Client</th>
        </tr>
      </thead>
      <tbody>
        {% for contact in contacts %}
          <tr data-client-id="{{ contact.id }}">
            <td>
               <img src="/static/img/user_icon.png" />
              {{ contact.first_name }} {{ contact.last_name }} - {{ contact.organisation|default('No organisation', True) }} 
            </td>
          </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>

  {% endif %}
  
  <script type="text/javascript">
    $(document).ready(function() {
      $('.data-list > tbody > tr').click(function() {
        window.location = '/client/' + $(this).data('client-id');  
      });
    });
  </script>

{% endblock %}
